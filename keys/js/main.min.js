import{CONFIG}from"./config.js";document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".accordion"),t=document.querySelectorAll("button[data-modal], a[data-modal]");var o=(o,r,n,i)=>{let d;o=window.matchMedia(o);function e(){if(o.matches)return e=r,t=n,d=new Swiper(e,t),void(i&&i(d));var e,t;void 0!==d&&d.destroy(!0,!0)}o.addEventListener("change",e),e()};o("(max-width: 1024px)",".yourself__swiper",{slidesPerView:"auto",freeMode:!1,grabCursor:!0,navigation:{nextEl:".yourself__next",prevEl:".yourself__prev"},scrollbar:{el:".yourself__scrollbar",draggable:!0},breakpoints:{1024:{spaceBetween:12},0:{spaceBetween:8}}}),o("(max-width: 1024px)",".tariffs__swiper",{slidesPerView:"auto",freeMode:!1,spaceBetween:12,grabCursor:!0,navigation:{nextEl:".tariffs__next",prevEl:".tariffs__prev"},scrollbar:{el:".tariffs__scrollbar",draggable:!0}}),window.Swiper&&(new Swiper(".become__swiper",{slidesPerView:"auto",spaceBetween:24,freeMode:!1,grabCursor:!0,navigation:{nextEl:".become__next",prevEl:".become__prev"},scrollbar:{el:".become__scrollbar",draggable:!0}}),new Swiper(".tenet__swiper",{slidesPerView:"auto",freeMode:!1,grabCursor:!0,navigation:{nextEl:".tenet__next",prevEl:".tenet__prev"},scrollbar:{el:".tenet__scrollbar",draggable:!0},breakpoints:{1024:{spaceBetween:24},0:{spaceBetween:12}}}),new Swiper(".before__swiper",{slidesPerView:"auto",spaceBetween:24,freeMode:!1,grabCursor:!0})),e.forEach(t=>{const o=t.querySelector(".accordion__control"),r=t.querySelector(".accordion__content");o.addEventListener("click",e=>{t.classList.toggle("open"),t.classList.contains("open")?(o.setAttribute("aria-expanded",!0),r.setAttribute("aria-hidden",!1),r.style.maxHeight=r.scrollHeight+"px"):(o.setAttribute("aria-expanded",!1),r.setAttribute("aria-hidden",!0),r.style.maxHeight=null)})}),t.forEach(o=>{o.addEventListener("click",function(e){r(),e.preventDefault();const t=document.querySelector(".modal--visible");t&&(t.classList.remove("modal--visible"),body.classList.remove("body--hidden")),function(e){r();const t=document.querySelector(`.modal[data-modal="${e}"]`);console.log("modal",t),console.log("name",e),t.classList.add("modal--visible"),body.classList.add("body--hidden"),t.addEventListener("click",function(e){"modal__close"!=e.target.classList&&"modal"!=e.target.classList[0]||(n(),t.classList.remove("modal--visible"),body.classList.remove("body--hidden"))})}(o.getAttribute("data-modal"))})});let r=function(){var e=window.innerWidth-document.body.offsetWidth+"px";body.style.paddingRight=e},n=function(){body.style.paddingRight="0px"};const i=document.querySelectorAll("a[data-scroll]"),d=document.querySelector(".header"),a=d.offsetTop;window.addEventListener("scroll",function(){window.pageYOffset>a?d.classList.add("header--fixed"):d.classList.remove("header--fixed")}),i.forEach(n=>{n.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(".modal--visible");t&&t.classList.contains("modal--burger")&&(t.classList.remove("modal--visible"),body.classList.remove("body--hidden"));var o=n.getAttribute("href");const r=document.querySelector(o);e=r.getBoundingClientRect().top,o=d.offsetHeight;window.scrollBy({top:e-o,behavior:"smooth"})})});const s=document.querySelectorAll(".video");s.forEach(t=>{let o=t.getAttribute("data-video");const e=document.querySelector('button[data-modal="video"]');e.addEventListener("click",e=>{e.preventDefault(),console.dir(t.children),0===t.children.length&&(e=function(e){let t=document.createElement("video");return t.setAttribute("controls",""),t.setAttribute("muted",""),t.setAttribute("src",String(e)),t}(o),t.appendChild(e))})});const l=document.getElementById("promo-input"),c=document.getElementById("vip-price"),u=document.getElementById("terms-checkbox"),m=document.getElementById("join-btn"),b=document.getElementById("error-msg");console.log("con",CONFIG),l.addEventListener("input",()=>{var e=l.value.trim().toUpperCase();CONFIG.promoCodes[e]?(e=CONFIG.promoCodes[e],e=(CONFIG.basePriceVip*(1-e)).toFixed(2),c.textContent=`Available for $${e}/month.`,l.style.borderColor="#00b347"):(c.textContent=`Available for $${CONFIG.basePriceVip}/month.`,l.style.borderColor="#d00000")}),m.addEventListener("click",e=>u.checked?void(window.location.href="https://stripe.com/pay"):(e.preventDefault(),m.style.border="2px solid #d00000",void(b.style.display="block"))),u.addEventListener("change",()=>{u.checked&&(m.style.border="",b.style.display="none")})});