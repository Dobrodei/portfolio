const body=document.querySelector(".body"),btnModal=document.querySelectorAll("button[data-modal]"),travelList=document.querySelector("#travel-list"),modalList=document.querySelector("#modal-list");function getInfo(){fetch("https://st.2aw.io:8081/excursions/find?by_tid=&page=0").then(function(t){return t.json()}).then(function(t){showCard(t)}).catch(function(){})}function showCard(t){let n="";t.excursions.forEach((t,e)=>{function s(t){return t<10?"0"+t:t}var a,l,i,o;n+=`
      <li class="travel-list__item" >
        <a class ="travel-list__box" href="${t.ex_url}?trvl=<${t.ex_tid}>" style = "background-image: url('${t.ex_images[0]?t.ex_images[0].url:"https://st.2aw.io:8080/common/planeBackground.jpg"}')">
          <div class="travel-list__top">
            <span class="travel-list__city travel-list__style">${t.ex_name}</span> 
            <span class="travel-list__decr travel-list__style">${t.ex_description}<span/>
          </div> 
          <div class="travel-list__bottom">
            <span class="travel-list__data travel-list__style">
              <span class="travel-list__start">Начало:</span>
              <time class= "travel-list__time"
              data-time = "${"in_progress"==t.ex_start_time?"Идет сейчас":new Date(t.ex_start_time)}"> ${"in_progress"==t.ex_start_time?new Date:(l=new Date(t.ex_start_time),i=l.getFullYear(),o=s(l.getMonth()+1),s(l.getDate())+`.${o}.${i} ${s(l.getHours())}.`+s(l.getMinutes()))}</time>
            </span> 
            <span class="travel-list__price travel-list__style"> ${a=t,0==a.ex_h_cost?"FREE":a.ex_h_cost&&a.ex_fix_cost_mode_grp?a.ex_h_cost+"₽ FIX":a.ex_h_cost&&!a.ex_fix_cost_mode_grp?a.ex_h_cost+"/час":void 0}</span> 
          </div> 
        </a> 
      </li>
    `}),travelList.innerHTML=n,modalList.innerHTML=n}btnModal.forEach(t=>{t.addEventListener("click",function(t){t=t.target.getAttribute("data-modal");const e=document.querySelector(`.modal[data-modal="${t}"]`);console.log(e),e.classList.add("modal--visible"),body.classList.add("body--hidden"),e.addEventListener("click",function(t){"modal__btn"!=t.target.classList&&"modal"!=t.target.classList[0]||(e.classList.remove("modal--visible"),body.classList.remove("body--hidden"))})})}),getInfo();